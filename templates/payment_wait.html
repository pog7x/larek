<div id="payment-wait">
    {% if object.is_processing %}
    <!-- Processing -->
    <div 
        class="text-center py-5"
        hx-get="{% url 'payment_progress' pk=object.id %}"
        hx-trigger="every 3.2s"
        hx-target="#payment-wait"
    >
        <div class="card border-0 shadow-sm mx-auto u-max-w-400">
            <div class="card-body p-5">
                <div class="spinner-border text-primary mb-4 u-size-4rem" role="status">
                    <span class="visually-hidden">Загрузка...</span>
                </div>
                <h4 class="mb-3">Обработка платежа</h4>
                <p class="text-muted mb-0">
                    Ожидайте подтверждения оплаты платежной системой.
                    <br>Это может занять до минуты.
                </p>
            </div>
        </div>
    </div>

    {% elif object.is_error %}
    <!-- Error -->
    <div class="text-center py-5">
        <div class="card border-0 shadow-sm mx-auto u-max-w-400">
            <div class="card-body p-5">
                <div class="rounded-circle bg-danger text-white d-inline-flex align-items-center justify-content-center mb-4 u-size-80">
                    <i class="bi bi-x-lg display-4"></i>
                </div>
                <h4 class="text-danger mb-3">Ошибка оплаты</h4>
                <p class="text-muted mb-4">
                    Произошла ошибка при обработке платежа.
                    <br>Попробуйте еще раз или используйте другую карту.
                </p>
                <a href="{% url 'payment' pk=object.id %}" class="btn btn-primary">
                    <i class="bi bi-arrow-clockwise me-2"></i>Попробовать снова
                </a>
            </div>
        </div>
    </div>

    {% elif object.is_paid %}
    <!-- Success -->
    <div class="text-center py-5">
        <div class="card border-0 shadow-sm mx-auto u-max-w-400">
            <div class="card-body p-5">
                <div class="rounded-circle bg-success text-white d-inline-flex align-items-center justify-content-center mb-4 u-size-80">
                    <i class="bi bi-check-lg display-4"></i>
                </div>
                <h4 class="text-success mb-3">Оплата успешна!</h4>
                <p class="text-muted mb-4">
                    Ваш заказ успешно оплачен.
                    <br>Мы свяжемся с вами в ближайшее время.
                </p>
                <div class="d-flex gap-2 justify-content-center">
                    <a href="{% url 'order_item' pk=object.order.id %}" class="btn btn-outline-primary">
                        <i class="bi bi-bag me-2"></i>Детали заказа
                    </a>
                    <a href="{% url 'index' %}" class="btn btn-primary">
                        <i class="bi bi-house me-2"></i>На главную
                    </a>
                </div>
            </div>
        </div>
    </div>
    {% endif %}
</div>
